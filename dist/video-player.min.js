const e=["restart","rewind","play","fast-forward","progress","current-time","duration","mute","volume","captions","settings","fullscreen"],t=/^((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube\.com|youtu.be))(\/(?:[\w\-]+\?v=|embed\/|v\/)?)([\w\-]+)/,r=/(https?:\/\/)?(www\.)?(player\.)?vimeo\.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,i=[];function o(e){if(!e)return{videoId:null,videoType:null};const i=e.match(t),o=e.match(r);return i&&i[5]?{videoId:i[5],videoType:"youtube"}:o&&o[5]?{videoId:o[5],videoType:"vimeo"}:{videoId:null,videoType:null}}function a(){return document.querySelectorAll(".custom_video-container").forEach(((t,r)=>{try{const a=t.getAttribute("data-video-link"),n=t.querySelector(".custom_video-player"),d=t.querySelector(".custom_video-play-btn"),s=t.querySelector(".custom_video-image-helper");if(!n)return void console.error(`Missing video player element in container ${r}`,t);if(!d)return void console.error(`Missing play button in container ${r}`,t);if(!a)return console.warn(`No video link provided for container ${r}`,t),void d.classList.add("is-hidden");const{videoId:l,videoType:c}=o(a);if(!l||!c)return console.warn(`Invalid video link format: ${a}`),void d.classList.add("is-hidden");let u;s?(src=s.getAttribute("src"),n.setAttribute("data-poster",src)):n.removeAttribute("data-poster"),n.setAttribute("data-plyr-provider",c),n.setAttribute("data-plyr-embed-id",l),d.setAttribute("aria-label",`Play ${c} video`),n.setAttribute("aria-label",`${c} video player`);try{u=new Plyr(n,{controls:e})}catch(e){return console.error("Failed to initialize Plyr player:",e),void d.classList.add("is-hidden")}i.push({player:u,container:t,playBtn:d,playerElement:n});const y=e=>{e.preventDefault(),u.play().catch((e=>{console.error("Failed to start playback:",e),"NotAllowedError"===e.name&&console.warn("Autoplay was prevented by browser policy")}))};d.addEventListener("click",y),u.on("ready",(e=>{e.detail.plyr.elements.container.classList.add("plyr--ready"),d.classList.add("is-ready")})),u.on("play",(()=>{d.classList.add("is-hidden"),d.setAttribute("aria-hidden","true")})),u.on("pause",(()=>{d.classList.remove("is-hidden"),d.setAttribute("aria-hidden","false")})),u.on("ended",(()=>{d.classList.remove("is-hidden"),d.setAttribute("aria-hidden","false")})),u.on("error",(e=>{console.error("Player error:",e.detail),d.classList.remove("is-hidden")}))}catch(e){console.error(`Error initializing player for container ${r}:`,e)}})),i}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",a):a();