const e=["restart","rewind","play","fast-forward","progress","current-time","duration","mute","volume","captions","settings","fullscreen"],t=/^((?:https?:)?\/\/)?((?:www|m)\.)?((?:youtube\.com|youtu.be))(\/(?:[\w\-]+\?v=|embed\/|v\/)?)([\w\-]+)/,r=/(https?:\/\/)?(www\.)?(player\.)?vimeo\.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/,o=[];function i(e){if(!e)return{videoId:null,videoType:null};const o=e.match(t),i=e.match(r);return o&&o[5]?{videoId:o[5],videoType:"youtube"}:i&&i[5]?{videoId:i[5],videoType:"vimeo"}:{videoId:null,videoType:null}}function n(){return document.querySelectorAll(".custom_video-container").forEach(((t,r)=>{try{const n=t.getAttribute("data-video-link"),a=t.querySelector(".custom_video-player"),d=t.querySelector(".custom_video-play-btn"),s=t.querySelector(".custom_video-image-helper");if(!a)return void console.error(`Missing video player element in container ${r}`,t);if(!d)return void console.error(`Missing play button in container ${r}`,t);if(!n)return console.warn(`No video link provided for container ${r}`,t),void d.classList.add("is-hidden");const{videoId:l,videoType:c}=i(n);if(!l||!c)return console.warn(`Invalid video link format: ${n}`),void d.classList.add("is-hidden");let u;s?(src=s.getAttribute("src"),a.setAttribute("data-poster",src)):a.removeAttribute("data-poster"),a.setAttribute("data-plyr-provider",c),a.setAttribute("data-plyr-embed-id",l),d.setAttribute("aria-label",`Play ${c} video`),a.setAttribute("aria-label",`${c} video player`);try{u=new Plyr(a,{controls:e})}catch(e){return console.error("Failed to initialize Plyr player:",e),void d.classList.add("is-hidden")}o.push({player:u,container:t,playBtn:d,playerElement:a});const y=e=>{e.preventDefault(),u.play().catch((e=>{console.error("Failed to start playback:",e),"NotAllowedError"===e.name&&console.warn("Autoplay was prevented by browser policy")}))};d.addEventListener("click",y),u.on("ready",(e=>{e.detail.plyr.elements.container.classList.add("plyr--ready")})),u.on("play",(()=>{d.classList.add("is-hidden"),d.setAttribute("aria-hidden","true")})),u.on("pause",(()=>{d.classList.remove("is-hidden"),d.setAttribute("aria-hidden","false")})),u.on("ended",(()=>{d.classList.remove("is-hidden"),d.setAttribute("aria-hidden","false")})),u.on("error",(e=>{console.error("Player error:",e.detail),d.classList.remove("is-hidden")}))}catch(e){console.error(`Error initializing player for container ${r}:`,e)}})),o}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n();